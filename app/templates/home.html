{% extends 'base.html' %}
{% block content %}
  <h2>Crear nueva tarea</h2>
  <form method="POST">
    <input type="text" name="title" placeholder="Título" required><br>
    <textarea name="description" placeholder="Descripción"></textarea><br>
    <input type="datetime-local" name="due_date"><br>
    <button type="submit">Agregar tarea</button>
  </form>

  <hr>

  <h2>Lista de tareas</h2>
  <ul>
    {% for task in tasks %}
      <li>
        <strong {% if task.is_done %}style="text-decoration: line-through;"{% endif %}>
          {{ task.title }}
        </strong> - {{ task.description }}
    
        {% if task.due_date %}
          <small>(Fecha límite: {{ task.due_date.strftime('%Y-%m-%d %H:%M') }})</small>
        {% endif %}
    
        <!-- Botón para marcar como completada -->
        <form action="{{ url_for('main.toggle_done', task_id=task.id) }}" method="post" style="display:inline;">
          <button type="submit">
            {% if task.is_done %}
              Desmarcar
            {% else %}
              Completar
            {% endif %}
          </button>
        </form>
    
        <!-- Botón para eliminar -->
        <form action="{{ url_for('main.delete_task', task_id=task.id) }}" method="post" style="display:inline;">
          <button type="submit">Eliminar</button>
        </form>
      </li>
    {% endfor %}
    </ul>
{% endblock %}
